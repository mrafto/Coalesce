{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - v1.0.0",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2024-12-09T12:00:00+00:00",
    "name": "Coalesce Discord Music Bot",
    "author": "mrafto@github.com",
    "description": "A feature-rich Discord music bot built with TypeScript, Discord.js v14, and yt-dlp. Play music from YouTube without API keys!",
    "features": [
        "eula"
    ],
    "docker_images": {
        "Node 22": "ghcr.io/parkervcp/yolks:nodejs_22",
        "Node 21": "ghcr.io/parkervcp/yolks:nodejs_21",
        "Node 20": "ghcr.io/parkervcp/yolks:nodejs_20",
        "Node 18": "ghcr.io/parkervcp/yolks:nodejs_18"
    },
    "file_denylist": [],
    "startup": "if [[ -d .git ]] && [[ {{AUTO_UPDATE}} == \"1\" ]]; then git pull; fi; if [[ ! -z ${NODE_PACKAGES} ]]; then npm install ${NODE_PACKAGES}; fi; if [[ ! -z ${UNNODE_PACKAGES} ]]; then npm uninstall ${UNNODE_PACKAGES}; fi; if [ -f package.json ]; then npm install --production; fi; npm run build; npm run deploy-commands; node dist/index.js",
    "config": {
        "files": "{\r\n    \".env\": {\r\n        \"parser\": \"file\",\r\n        \"find\": {\r\n            \"DISCORD_TOKEN\": \"DISCORD_TOKEN={{env.DISCORD_TOKEN}}\",\r\n            \"CLIENT_ID\": \"CLIENT_ID={{env.CLIENT_ID}}\",\r\n            \"GUILD_ID\": \"GUILD_ID={{env.GUILD_ID}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Bot is ready!\"\r\n}",
        "logs": "{}",
        "stop": "^^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\n# Coalesce Discord Bot Installation Script\n\napt update\napt install -y git curl jq file unzip make gcc g++ python3 python3-pip ffmpeg\n\nmkdir -p /mnt/server\ncd /mnt/server\n\nif [ \"${USER_UPLOAD}\" == \"true\" ] || [ \"${USER_UPLOAD}\" == \"1\" ]; then\n    echo -e \"assuming user knows what they are doing have a good day.\"\n    exit 0\nfi\n\n## add git ending if it's not there\nif [[ ${GIT_ADDRESS} != *.git ]]; then\n    GIT_ADDRESS=${GIT_ADDRESS}.git\nfi\n\nif [ -z \"${USERNAME}\" ] && [ -z \"${ACCESS_TOKEN}\" ]; then\n    echo -e \"using anon api call\"\nelse\n    GIT_ADDRESS=\"https://${USERNAME}:${ACCESS_TOKEN}@$(echo -e ${GIT_ADDRESS} | cut -d/ -f3-)\"\nfi\n\n## clone repo\nif [ -d .git ]; then\n    echo -e \"Updating existing repository...\"\n    git pull\nelse\n    echo -e \"Cloning repository...\"\n    if [ -z ${BRANCH} ]; then\n        echo -e \"Cloning default branch\"\n        git clone ${GIT_ADDRESS} .\n    else\n        echo -e \"Cloning ${BRANCH} branch\"\n        git clone --single-branch --branch ${BRANCH} ${GIT_ADDRESS} .\n    fi\nfi\n\n## install yt-dlp\necho -e \"Installing yt-dlp...\"\npython3 -m pip install --upgrade yt-dlp\n\n## install node modules\nif [ -f package.json ]; then\n    echo -e \"Installing npm packages...\"\n    npm install\nfi\n\n## build TypeScript\nif [ -f tsconfig.json ]; then\n    echo -e \"Building TypeScript project...\"\n    npm run build\nfi\n\necho -e \"\\nInstallation complete!\"\necho -e \"Don't forget to set your environment variables:\"\necho -e \"  - DISCORD_TOKEN\"\necho -e \"  - CLIENT_ID\"\necho -e \"  - GUILD_ID (optional)\"",
            "container": "node:22-bookworm-slim",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Git Repo Address",
            "description": "GitHub repository URL for the bot",
            "env_variable": "GIT_ADDRESS",
            "default_value": "https://github.com/mrafto/Coalesce",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Git Branch",
            "description": "What branch to pull from GitHub (leave empty for default branch)",
            "env_variable": "BRANCH",
            "default_value": "main",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "User Uploads",
            "description": "Skip the download script if you want to upload your own files",
            "env_variable": "USER_UPLOAD",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Auto Update",
            "description": "Pull the latest version on startup",
            "env_variable": "AUTO_UPDATE",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Git Username",
            "description": "Username for authentication with git (if private repo)",
            "env_variable": "USERNAME",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Git Access Token",
            "description": "Personal access token for private repositories",
            "env_variable": "ACCESS_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Discord Bot Token",
            "description": "Your Discord bot token from https://discord.com/developers/applications",
            "env_variable": "DISCORD_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:255",
            "field_type": "text"
        },
        {
            "name": "Discord Client ID",
            "description": "Your Discord application client ID",
            "env_variable": "CLIENT_ID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:255",
            "field_type": "text"
        },
        {
            "name": "Discord Guild ID",
            "description": "Your Discord server ID for testing (optional, leave empty for global commands)",
            "env_variable": "GUILD_ID",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:255",
            "field_type": "text"
        },
        {
            "name": "Additional Node Packages",
            "description": "Install additional node packages (space separated)",
            "env_variable": "NODE_PACKAGES",
            "default_value": "",
            "user_viewable": false,
            "user_editable": false,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Uninstall Node Packages",
            "description": "Uninstall node packages (space separated)",
            "env_variable": "UNNODE_PACKAGES",
            "default_value": "",
            "user_viewable": false,
            "user_editable": false,
            "rules": "nullable|string",
            "field_type": "text"
        }
    ]
}

